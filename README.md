# jack運営のためのサーバー

## さぁ始めましょう
### ソースコードを入手しましょう
まずはこのアプリケーションのソースコードをあなたのパソコン（これを「ローカル」と言います．一方サーバーにあるものを「リモート」と言います．）へとダウンロードしましょう．もしあなたがこのアプリの開発を担当したいと考えているのならば，gitを使うことを強くオススメします！gitが何か，それを説明するには本書は狭すぎます．心強い先輩に聞くか，我らが友人・Googleに聞いてみましょう！

ダウンロード（git用語ではクローンと言います）したい場所で，シェル（ターミナル，コマンドプロンプト，パワーシェルとだいたい同じ）を開いて，次のコマンドを打ち込んでください．
```
$ git clone https://github.com/ayahito-saji/jack_server
```
おっと，この先頭の$は打ち込まないでください．これは本書でこの行がコマンドであることを示しているだけです．
クローンできましたか？クローンできたらcdコマンドで移動しましょう．
```
cd jack_server
```
この場所を「ルートディレクトリ」と呼びます．覚えておいてください．

さて，ソースコードはgitで共有していますが，パスワード類はセキュリティの関係でアップロードされていません．
そこで，パスワード類をまとめた.envファイルを仲間から受け取りましょう．
受け取ったら，このルートディレクトリに保存してください．


### 環境を整える
このアプリケーションは，次の環境で正しく動作することが確認されています．
* Ruby 2.4
* Rails 5.1
しかし，あなたのPCにこれらの環境を構築するのは大変です．おそらく環境構築だけでかなりの無駄な時間を過ごすことになるでしょう．（もしあなたがWindowsユーザーならば，あなたは多くのWindows由来のエラーのせいで頭を抱えこむことになる可能性が大いにあります．）
そこで，私はすべてのOS（それが例えWindowsであってもmacOSであっても）に対応したOSのエミュレータを利用することで，このアプリケーションの開発仲間の全てのPCに同じ「仮想のPC」をインストールする道を選ぶことにしました．全ての開発者のPCの中に新しく「同じPC」をインストールするのです．そうすれば，擬似的に，私たちは完全に同じPCで開発を行うことができます．

この仮想マシンを使うためには，2つのソフトウェア，そして，2つのコマンドを実行するだけです．
* Virtual Box 5.2.18
* Vagrant 2.1.4
これを，上から順に入れてください．バージョンはだいたいで構いません．ちなみにホストPCが本体，ゲストが仮想PCを示しています．

きちんと入ったか確認するために，ためしに次のコマンドを実行してみましょう．
```
$ vagrant -v
```

さて，バージョンが帰ってきたなら，正しく入っている証拠です．
さっそく環境を構築しましょう．
```
$ vagrant up
```
このコマンドは数十分程度時間がかかるかもしれません．
なぜなら，このコマンドだけで，あなたのPCに必要なソフトウェア，必要な設定，必要ななにもかもが，自動的にインストールされるからです．これ以上簡単になるでしょうか！

環境が構築できたら，次のコマンドでそのまま仮想PCにログインします．
```
$ vagrant ssh
```
おめでとうございます！あなたはこのアプリケーションのための仮想PCにログインできました！
### セットアップ
実は，この仮想PCと私たちのPCは，ソースコード一式を共有しています．したがって，メモ帳などで編集したソースコードによって，即座に仮想PCの動作も変更されます．
```
$ cd /vagrant
$ ls
```
ここが，ソースコードの共有フォルダです．

さて，データベースをセットアップしましょう．
```
$ rails db:migrate
```
最後に，行うコマンドが次のコマンドです．
```
$ rails server
```
プログラムが動き始めましたか．そうしたら，ブラウザを開いて，URLバーに次のように打ち込んでください．
```
localhost:3000
```
おめでとうございます！これで，あなたのPCに完璧な開発環境を手に入れることができました！

#### データベース登録
サーバーを立てた後，次のURLにアクセスして，データベースにデータを挿入しましょう
メンバーをslack経由で自動で登録するためには，ブラウザで次のURLにアクセスしてください
```
localhost:3000/api/members/seed
```
2018年度の通常活動を登録するためには，ブラウザで次のURLにアクセスしてください
```
localhost:3000/api/events/seed
```
